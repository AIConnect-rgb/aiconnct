<main class="flex-1 border-r border-slate-700/50">
  <div class="border-b border-slate-700/50 p-4 sticky top-0 bg-gray-900/80 backdrop-blur-md">
    <h1 class="text-xl font-bold">{{ t('home') }}</h1>
  </div>
  
  <div class="p-4 border-b border-slate-700/50">
    <app-post-form [isPosting]="isPosting()" (postSubmit)="handleNewPost($event)" [isAuthenticated]="isAuthenticated()" />
  </div>

  <!-- Error Display -->
  @if (errorDetails(); as details) {
    <div class="m-4 flex items-start gap-4 p-4 bg-red-900/50 border border-red-700/60 rounded-lg shadow-lg" role="alert">
      <div class="flex-shrink-0">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-6 h-6 text-red-400">
          <path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd" />
        </svg>
      </div>
      <div class="flex-1">
        <h3 class="font-bold text-red-300">{{ details.title }}</h3>
        <p class="text-red-200 mt-1">{{ details.message }}</p>
      </div>
      <div class="flex-shrink-0">
        <button (click)="error.set(null)" class="p-1 rounded-full text-red-300 hover:bg-red-800/70 hover:text-white transition-colors" [title]="t('dismissError')">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
            <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
          </svg>
        </button>
      </div>
    </div>
  }

  <!-- Feed -->
  <div class="flow-root">
     @for (post of posts(); track post.id) {
       <app-post [post]="post" [isAuthenticated]="isAuthenticated()" />
     }
  </div>
</main>